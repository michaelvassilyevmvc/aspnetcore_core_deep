@page "{id:int}"
@model DepartsCrud.Pages.Employees.Edit
@{
    ViewBag.Action = "edit";
}

@section title_section
{
    <h3>Edit Employee</h3>
}

@await Html.PartialAsync("_EmployeeDetail", Model.EmployeeViewModel)

<form name="deleteEmployeeForm" method="post"
      action="/employees/edit/@Model.EmployeeViewModel.Employee.Id?handler=DeleteEmployee">
    @Html.AntiForgeryToken()
    <button type="submit" id="delete-employee" class="btn btn-danger">Delete</button>
</form>

@section scripts
{
    <script>
        document.querySelector('#delete-employee').addEventListener('click', (e) => {
            e.preventDefault();
            const employeeName = '@Model.EmployeeViewModel.Employee.Name';
            const userConfirmation =  confirm(`Are you sure you want to delete the employee: ${employeeName}`);
            if (userConfirmation) {
                document.forms["deleteEmployeeForm"].submit();
            }
        })
    </script>
}

@model EmployeeViewModel

@if (Model is not null && Model.Employee is not null)
{
    <form method="post">
        @if (ViewBag.Action == "edit")
        {
            <input type="hidden" name="Employee.Id" value="@Model.Employee.Id"/>
        }
        <div class="row mb-3">
            <div class="col-2">
                <label class="col-form-label">Name</label>
            </div>
            <div class="col-6">
                <input class="form-control" type="text" name="Employee.Name" value="@Model.Employee.Name"/>
            </div>
        </div>
        <div class="row mb-3">
            <div class="col-2">
                <label class="col-form-label">Position</label>
            </div>
            <div class="col-6">
                <input class="form-control" type="text" name="Employee.Position" value="@Model.Employee.Position"/>
            </div>
        </div>
        <div class="row mb-3">
            <div class="col-2">
                <label class="col-form-label">Salary</label>
            </div>
            <div class="col-6">
                <input class="form-control" type="number" name="Employee.Salary" value="@Model.Employee.Salary"/>
            </div>
        </div>
        <div class="row mb-3">
            <div class="col-2">
                <label class="col-form-label">Department</label>
            </div>
            <div class="col-6">
                <select name="Employee.DepartmentId" class="form-control">
                    @if (Model.Departments is not null && Model.Departments.Count > 0)
                    {
                        if (ViewBag.Action == "create")
                        {
                            <option selected="selected" value="0">--- Please Select ---</option>
                        }

                        @foreach (var department in Model.Departments)
                        {
                            if (ViewBag.Action == "edit")
                            {
                                if (department.Id == Model.Employee.DepartmentId)
                                {
                                    <option selected="selected" value="@department.Id">@department.Name</option>
                                }
                                else
                                {
                                    <option value="@department.Id">@department.Name</option>
                                }
                            }
                            else
                            {
                                <option value="@department.Id">@department.Name</option>
                            }
                        }
                    }
                </select>
            </div>
        </div>
        <div class="row mb-3">
            <div class="col-2">
                <button type="submit" class="btn btn-primary">Save</button>
                <a asp-page="/employees/index" class="btn btn-secondary">Cancel</a>
            </div>
            <div class="col-4">
            </div>
        </div>

    </form>
}